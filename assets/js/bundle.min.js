function sendToDify(e){fetch("http://localhost:3001/send-to-dify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inputs:{country:e.selectedCountry,main:e.selectedMain,dish:e.selectedMainDish},user:"user"})}).then((e=>{if(!e.ok)throw new Error("Dify送信に失敗しました。");return e.json()})).then((e=>{const t=e.data.outputs.result;console.log("Difyの返答",t);const n=document.getElementById("resultBox"),s=document.createElement("div");s.classList.add("ai-reply"),s.innerHTML=`\n    <br>\n    <div style="padding: 1em; margin-top: 1em; background: #f3faff; border-left: 5px solid #2196f3;">\n      🤖 <strong>AIの提案</strong><br>\n      ${t}\n    </div>\n    `,n.appendChild(s)})).catch((e=>{console.error("エラー",e)}))}document.addEventListener("DOMContentLoaded",(function(){let e={selectedCountry:null,selectedMain:null,selectedMainDish:null};function t(t,n,s,o){const d=document.getElementById(t),l=document.getElementById(n);let i=[];d.addEventListener("click",(function(){let t;i.length===s.length&&(i=[],console.log("全て表示されたのでリセットします。"));do{t=Math.floor(Math.random()*s.length)}while(i.includes(t));i.push(t);const n=s[t];l.textContent=n,e[o]=n,function(){const t=Object.values(e);t.every((e=>null!==e))&&setTimeout((()=>{const t=`今日のご飯は…<br>\n          🍽️ <strong>ジャンル：</strong>${e.selectedCountry}<br>\n          🍞 <strong>主食：</strong>${e.selectedMain}<br>\n          🍖 <strong>メイン：</strong>${e.selectedMainDish}`,n=document.getElementById("resultBox");n.innerHTML=t,n.classList.add("show"),sendToDify(e),setTimeout((()=>{n.classList.remove("show"),n.innerHTML="",e={selectedCountry:null,selectedMain:null,selectedMainDish:null},document.getElementById("selectedCountry").textContent="",document.getElementById("selectedMain").textContent="",document.getElementById("selectedMainDish").textContent=""}),5e4)}),200)}()}))}t("selectCountryButton","selectedCountry",["中華","イタリアン","和食","アメリカ"],"selectedCountry"),t("selectMainButton","selectedMain",["白米","和めん","パスタ","ぱん"],"selectedMain"),t("selectMainDishButton","selectedMainDish",["鶏肉","牛肉","豚肉","魚","魚介（魚以外"],"selectedMainDish")})),$(".dishImages1").slick({centerMode:!0,centerPadding:"60px",slidesToShow:3,responsive:[{breakpoint:768,settings:{arrows:!1,centerMode:!0,centerPadding:"40px",slidesToShow:3}},{breakpoint:480,settings:{arrows:!1,centerMode:!0,centerPadding:"40px",slidesToShow:1}}]});